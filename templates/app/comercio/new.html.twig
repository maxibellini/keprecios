{% extends 'base.html.twig' %}

{% block title %}Solicitud de Comercio{% endblock %}

{% block head %}
    {{ parent() }}

{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code {  padding: 2px 6px; }
</style>

<div class="example-wrapper" style="background-color: rgb(255, 0, 0,0.0)">
<div class="e">
{% for message in app.flashes('exito') %}
      <div class="alert alert-success">
         {{message}}     
      </div>    
{% endfor %}

</div>

 <div class="row">
    <div class="col-sm-2">

    </div>    
    <div class="col-sm-8 tarjeta-body item-content " style="background-color: #FCFCFC; border-radius: 9px 9px 9px 9px;-moz-border-radius: 9px 9px 9px 9px; -webkit-border-radius: 9px 9px 9px 9px; border: 0px solid #000000; -webkit-box-shadow: 0px 0px 17px -2px rgba(0,0,0,0.41); -moz-box-shadow: 0px 0px 17px -2px rgba(0,0,0,0.41); box-shadow: 0px 0px 17px -2px rgba(0,0,0,0.41);">
          <br>
          <h4 class="display-5">Solicitud de Comercio</h4>  
          <br>


    {{ form_start(formulario) }}
      <div class="row form-group" >        
        <div class="col-12 " style="color:red"> {{ form_errors(formulario) }} </div>
        <div class="col-sm-6 form-group "> {{ form_row(formulario.nombreComercio,{ 'label' : 'Nombre del Comercio', 'attr' : { 'class' : 'form-control' }}) }}  </div>
        <div class="col-sm-6 "> {{ form_row(formulario.cuitComercio,{ 'label' : 'CUIT del Comercio', 'attr' : { 'class' : 'form-control' }}) }} </div>
        <div class="col-sm-6 "> {{ form_row(formulario.descripcionComercio,{ 'label' : 'Descripción del Comercio', 'attr' : { 'class' : 'form-control' }}) }} </div>
        <div class="col-sm-6 "> {{ form_row(formulario.sucursal,{ 'label' : '¿Es sucursal?', 'attr' : { 'class' : '' }}) }} </div>
        <div class="col-sm-12 "> </div><br>
        <div class="col-sm-6 "> {{ form_row(formulario.emailComercio,{ 'label' : 'Email del Comercio', 'attr' : { 'class' : 'form-control' }}) }} </div>
        <div class="col-sm-6 "> {{ form_row(formulario.url,{ 'label' : 'URL o sitio web', 'attr' : { 'class' : 'form-control' }}) }} </div>
        <div class="col-sm-12 "> </div><br>
        <div class="col-sm-6 "> {{ form_row(formulario.horaAperturaComercio,{ 'label' : 'Hora de apertura', 'attr' : { 'class' : 'form-control ' }}) }} </div>
        <div class="col-sm-6 "> {{ form_row(formulario.horaCierreComercio,{ 'label' : 'Hora de cierre', 'attr' : { 'class' : 'form-control ' }}) }} </div>
        <div class="col-sm-12 "> </div><br>
        <div class="col-sm-6 "> {{ form_row(formulario.direccionComercio,{ 'label' : 'Dirección del Comercio', 'attr' : { 'class' : 'form-control' }}) }} </div>
        <div class="col-sm-6 "> {{ form_row(formulario.localidad,{ 'label' : 'Localidad', 'attr' : { 'class' : 'form-control' }}) }} </div>
        <div class="col-sm-12 "> </div><br>
        <div>
                  <!-- Button trigger modal -->
        <a class="btn btn-link" data-toggle="modal" data-target="#exampleModal" style="color:grey; border: 1px solid grey">
          Cargar posición desde mapa
        </a>
        </div>  
        <div class="col-sm-6 "> {{ form_row(formulario.latitudComercio,{ 'label' : 'Ubicación (latitud)', 'attr' : { 'class' : 'form-control' }}) }} </div>
        <div class="col-sm-6 "> {{ form_row(formulario.longitudComercio,{ 'label' : 'Ubicación (longitud)', 'attr' : { 'class' : 'form-control' }}) }} </div> 
        <div class="col-sm-12 "> </div><br>
        <div class="col-sm-6 "> {{ form_row(formulario.telefonoComercio, { 'label' : 'Teléfono', 'attr' : { 'class' : 'form-control' }}) }} </div>
        <div class="col-sm-6 "> {{ form_row(formulario.imageFile,{ 'label' : 'Imagen del comercio', 'attr' : { 'class' : 'form-control' }}) }} </div> 

        <br>         
        <div class="col-sm-6" align="center">
          <br>
          <a class="" href="{{ path('app_inicio') }}">Cancelar</a>
        </div>
        <div class="col-sm-6" align="right">
          <br>
       
          <button type="submit" class="btn btn-danger">Enviar solicitud</button>
      </div>
    {{ form_end(formulario) }}
    <br>
    </div>
</div>
</div>
</div>
<br>


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document" style="font-family: Arial, sans-serif; font-size: smaller; ">
    <div class="modal-content">
      <div class="modal-body">
        <div style="background-color: #E85395; color: white; text-align: center;border-radius: 5px 5px 5px 5px; -moz-border-radius: 5px 5px 5px 5px; -webkit-border-radius: 5px 5px 5px 5px; border: 0px solid #000000;">
        Seleccione la posición en el mapa y luego presione
         el botón <b>"Cargar posición"</b> para asignar la latitud y longitud.</div>
                <iframe id="inlineFrameExample"
                    title="Inline Frame Example"
                    width="100%"
                    height="230"
                    src="{{path('app_map_ubicacion')}}">
                </iframe>
      </div>
      <div class="modal-footer mbr-fonts-style" >
        <button type="button" id="cerrarModal" align="left" class="btn btn-link btn-sm" data-dismiss="modal">Cancelar</button>
        <button type="button" align="right" class="btn btn-warning btn-sm" onclick="setUbicacion()">Cargar posición</button>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  function setUbicacion() {
    var iframes = document.querySelector("iframe"); //te da los Iframes de la pagina
    var iframeDocument = iframes.contentWindow.document;
    eltolat = iframeDocument.getElementById('inputLat').value;
    eltolong = iframeDocument.getElementById('inputLong').value; 
    document.getElementById('comercio_latitudComercio').value = eltolat;
    document.getElementById('comercio_longitudComercio').value = eltolong;
    document.getElementById("cerrarModal").click();
  }
</script>
{% endblock %}
